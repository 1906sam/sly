/*! Sly 1.0.0-rc.3 25-Jan-2013 | https://github.com/Darsain/sly */
(function(g,E,P){function Z(f,b,ea){var p,k,ia,x,w,E;function F(a,ua){if(G&&c.released){var n=ja(a);Q?(a=l[n.centerItem].center,H&&e.activate(n.centerItem,1)):a>d.start&&a<d.end&&(a=l[n.firstItem].start)}!c.released&&"slidee"===c.source&&b.elasticBounds?a>d.end?a=d.end+(a-d.end)/6:a<d.start&&(a=d.start+(a-d.start)/6):a=I(a,d.start,d.end);p=+new Date;k=0;ia=d.cur;x=a;w=a-d.cur;E=ua;d.dest=a;!c.released&&!$&&e.cycle();g.extend(h,ja(void 0));Z();aa[0]&&J.page!==h.activePage&&(J.page=h.activePage,aa.removeClass(b.activeClass).eq(h.activePage).addClass(b.activeClass));
a!==d.cur&&(A("change"),N||M())}function M(){N?(E||(!c.released?"slidee"===c.source:33>b.speed)?d.cur=x:!c.released&&"handle"===c.source?d.cur+=(x-d.cur)*b.syncFactor:(k=Math.min(+new Date-p,b.speed),d.cur=ia+w*jQuery.easing[b.easing](k/b.speed,k,0,1,b.speed)),x===Math.round(d.cur)&&(!c.released||k>=b.speed)?(d.cur=d.dest,N=0):N=fa(M),A("move"),B||(K?s[0].style[K]=(b.horizontal?"translateX":"translateY")+"("+-d.cur+"px)":s[0].style[b.horizontal?"left":"top"]=-Math.round(d.cur)+"px"),!N&&c.released&&
A("moveEnd"),Y()):(N=fa(M),c.released&&A("moveStart"))}function Y(){y&&(r.cur=d.start===d.end?0:((!c.released&&"handle"===c.source?d.dest:d.cur)-d.start)/(d.end-d.start)*r.end,r.cur=I(Math.round(r.cur),r.start,r.end),J.hPos!==r.cur&&(J.hPos=r.cur,K?y[0].style[K]=(b.horizontal?"translateX":"translateY")+"("+r.cur+"px)":y[0].style[b.horizontal?"left":"top"]=r.cur+"px"))}function ka(a,b,n){"boolean"===typeof b&&(n=b,b=P);b===P?F(d[a]):Q&&"center"!==a||(b=e.getPos(b))&&F(b[a],n)}function la(a){return R(a)?
I(a,0,l.length-1):a===P?-1:u.index(a)}function S(a,b){return parseInt(a.css(b),10)}function ja(a){a=I(R(a)?a:d.dest,d.start,d.end);var b={},n=H?0:z/2;if(!B)for(var c=0,e=t.length;c<e;c++){if(a>=d.end||c===t.length-1){b.activePage=t.length-1;break}if(a<=t[c]+n){b.activePage=c;break}}if(G){for(var e=c=n=!1,f=0,h=l.length;f<h;f++){!1===n&&a<=l[f].start&&(n=f);!1===e&&a-l[f].size/2<=l[f].center&&(e=f);if(f===l.length-1||!1===c&&a<l[f+1].end)c=f;if(!1!==c)break}b.firstItem=R(n)?n:0;b.centerItem=R(e)?e:
b.firstItem;b.lastItem=R(c)?c:b.centerItem}return b}function Z(){if(G){var a=0===h.activeItem,c=h.activeItem>=l.length-1,e=a?"first":c?"last":"middle";J.itemsButtonState!==e&&(J.itemsButtonState=e,T.is("button,input")&&T.prop("disabled",a),U.is("button,input")&&U.prop("disabled",c),T[a?"removeClass":"addClass"](b.disabledClass),U[c?"removeClass":"addClass"](b.disabledClass))}aa[0]&&(a=d.dest<=d.start,c=d.dest>=d.end,e=a?"first":c?"last":"middle",J.pagesButtonState!==e&&(J.pagesButtonState=e,V.is("button,input")&&
V.prop("disabled",a),W.is("button,input")&&W.prop("disabled",c),V[a?"removeClass":"addClass"](b.disabledClass),W[c?"removeClass":"addClass"](b.disabledClass)))}function da(a){return Math.round(I(a,r.start,r.end)/r.end*(d.end-d.start))+d.start}function ma(a){var e="touchstart"===a.type,n=a.data.source,f="slidee"===n;if(e||1>=a.which)v(a),c.source=n,c.$source=g(a.target),c.init=0,c.released=0,c.touch=e,c.initLoc=(e?a.originalEvent.touches[0]:a)[b.horizontal?"pageX":"pageY"],c.initPos=f?d.cur:r.cur,
c.start=+new Date,c.time=0,c.path=0,c.pathMin=f?-c.initLoc:-r.cur,c.pathMax=f?document[b.horizontal?"width":"height"]-c.initLoc:r.end-r.cur,(f?s:y).addClass(b.draggedClass),ga.on(e?na:oa,pa)}function pa(a){c.released="mouseup"===a.type||"touchend"===a.type;c.path=I((c.touch?a.originalEvent[c.released?"changedTouches":"touches"][0]:a)[b.horizontal?"pageX":"pageY"]-c.initLoc,c.pathMin,c.pathMax);if(!c.init&&(Math.abs(c.path)>(c.touch?50:10)||"handle"===c.source))c.init=1,"slidee"===c.source&&(ha=1),
e.pause(1),c.$source.on("click",function n(a){v(a,1);"slidee"===c.source&&(ha=0);c.$source.off("click",n)}),A("moveStart");c.init&&(v(a),c.released&&("slidee"===c.source&&33<b.speed)&&(c.path+=200*c.path/(+new Date-c.start)),F("slidee"===c.source?Math.round(c.initPos-c.path):da(c.initPos+c.path)));c.released&&(ga.off(c.touch?na:oa,pa),("slidee"===c.source?s:y).removeClass(b.draggedClass),d.cur===d.dest&&A("moveEnd"))}function A(a,c,e,g,l){switch(a){case "active":e=c;c=u;break;case "activePage":e=
c;c=t;break;default:l=c,c=d,e=u,g=h}if(q[a])for(var j=0,m=q[a].length;j<m;j++)q[a][j].call(f,c,e,g,l);b.domEvents&&!B&&C.trigger(ba+":"+a,[c,e,g,l])}b=g.extend({},g.fn[ba].defaults,b);var e=this,qa=0,B=R(f),ga=g(document),C=g(f),s=C.children().eq(0),z=0,m=0,d={start:0,center:0,end:0,cur:0,dest:0},D=g(b.scrollBar).eq(0),y=D.length?D.children().eq(0):0,ca=0,O=0,r={start:0,end:0,cur:0},X=g(b.pagesBar),aa=0,t=[],va="basic"===b.itemNav,ra="smart"===b.itemNav,H="forceCentered"===b.itemNav,Q="centered"===
b.itemNav||H,G=!B&&(va||ra||Q||H),u=0,l=[],h={firstItem:0,lastItem:1,centerItem:1,activeItem:-1,activePage:0,items:0,pages:0},sa=b.scrollSource?g(b.scrollSource):C,wa=b.dragSource?g(b.dragSource):C,T=g(b.prev),U=g(b.next),V=g(b.prevPage),W=g(b.nextPage),q={},J={};E=w=x=ia=k=p=void 0;var c={released:1},ta="touchstart."+j+" mousedown."+j,oa="mousemove."+j+" mouseup."+j,na="touchmove."+j+" touchend."+j,N=0,L=0,$=0,ha=0,xa=e.reload=function(){var a=0;d.old=g.extend({},d);z=B?0:C[b.horizontal?"width":
"height"]();ca=D[b.horizontal?"width":"height"]();m=B?f:s[b.horizontal?"outerWidth":"outerHeight"]();t=[];d.start=0;d.end=Math.max(m-z,0);J={};if(G){u=s.children(":visible");h.items=u.length;l=[];var c=S(s,b.horizontal?"paddingLeft":"paddingTop"),n=S(s,b.horizontal?"paddingRight":"paddingBottom"),j=S(u,b.horizontal?"marginLeft":"marginTop"),k=S(u.slice(-1),b.horizontal?"marginRight":"marginBottom"),ea=0,p="none"!==u.css("float"),a=j?0:k;m=0;u.each(function(a,e){var d=g(e),f=d[b.horizontal?"outerWidth":
"outerHeight"](!0),h=S(d,b.horizontal?"marginLeft":"marginTop"),d=S(d,b.horizontal?"marginRight":"marginBottom"),k={size:f,start:m-(!a||b.horizontal?0:h),center:m-Math.round(z/2-f/2),end:m-z+f-(j?0:d)};a||(ea=-(H?Math.round(z/2-f/2):0)+c,m+=c);m+=f;!b.horizontal&&!p&&d&&(h&&0<a)&&(m-=Math.min(h,d));a===u.length-1&&(m+=n);l.push(k)});s[0].style[b.horizontal?"width":"height"]=m+"px";m-=a;d.start=ea;d.end=H?l[l.length-1].center:Math.max(m-z,0);h.activeItem>=l.length?e.activate(l.length-1):1===l.length&&
u.eq(h.activeItem).addClass(b.activeClass)}d.center=Math.round(d.end/2+d.start/2);g.extend(h,ja(void 0));y&&(O=b.dynamicHandle?Math.round(ca*z/m):y[b.horizontal?"outerWidth":"outerHeight"](),b.dynamicHandle&&(O=I(O,b.minHandleSize,ca),y[0].style[b.horizontal?"width":"height"]=O+"px"),r.end=ca-O,N||Y());if(!B){var q=0,k="",x=0;if(H)t=g.map(l,function(a){return a.center});else for(;q-z<d.end;){var v=Math.min(d.end,q);t.push(v);q+=z;if(q>d.end&&G&&d.end-v<(l[l.length-1].size-a)/2){t[t.length-1]=d.end;
break}}if(X[0]){for(a=0;a<t.length;a++)k+=b.pageBuilder(x++);aa=g(k).appendTo(X.empty())}}F(I(d.dest,d.start,d.end));h.pages=t.length;h.slideeSize=m;h.frameSize=z;h.sbSize=ca;h.handleSize=O;A("load")};e.getPos=function(a){if(a===P)return d;if(G)return a=la(a),-1!==a?l[a]:!1;var c=s.find(a).eq(0);return c[0]?(a=b.horizontal?c.offset().left-s.offset().left:c.offset().top-s.offset().top,c=c[b.horizontal?"outerWidth":"outerHeight"](),{start:a,center:a-z/2+c/2,end:a-z+c,size:c}):!1};e.getRel=function(){return h};
e.prev=function(){e.activate(h.activeItem-1)};e.next=function(){e.activate(h.activeItem+1)};e.prevPage=function(){e.activatePage(h.activePage-1)};e.nextPage=function(){e.activatePage(h.activePage+1)};e.slideBy=function(a,b){F(d.dest+a,b)};e.slideTo=function(a,b){F(a,b)};e.toStart=function(a,b){ka("start",a,b)};e.toEnd=function(a,b){ka("end",a,b)};e.toCenter=function(a,b){ka("center",a,b)};e.activate=function(a,c){if(G&&a!==P){var d=la(a),f=h.activeItem;h.activeItem=d;u.eq(f).removeClass(b.activeClass);
u.eq(d).addClass(b.activeClass);Z();d!==f&&A("active",d);c||(Q?e.toCenter(d):ra&&(d>=h.lastItem?e.toStart(d):d<=h.firstItem?e.toEnd(d):e.cycle()))}};e.activatePage=function(a){t.length&&(a=I(a,0,t.length-1),F(t[a]),A("activePage",a))};e.cycle=function(a){if(b.cycleBy&&b.cycleInterval&&!("items"===b.cycleBy&&!l[0]||a&&$))$=0,L?L=clearTimeout(L):A("cycleStart"),L=setTimeout(function(){switch(b.cycleBy){case "items":e.activate(h.activeItem>=l.length-1?0:h.activeItem+1);break;case "pages":e.activatePage(h.activePage>=
t.length-1?0:h.activePage+1)}A("cycle")},b.cycleInterval)};e.pause=function(a){a||($=!0);L&&(L=clearTimeout(L),A("cyclePause"))};e.toggle=function(){e[L?"pause":"cycle"]()};e.set=function(a,c){g.isPlainObject(a)?g.extend(b,a):b.hasOwnProperty(a)&&(b[a]=c)};e.on=function(a,b){if("object"===typeof a)for(var c in a){if(a.hasOwnProperty(c))e.on(c,a[c])}else if(b instanceof Array){c=0;for(var d=b.length;c<d;c++)e.on(a,b[c])}else if("function"===typeof b){q[a]=q[a]||[];c=0;for(d=q[a].length;c<d;c++)if(q[a][c]===
b)return;q[a].push(b)}};e.off=function(a,b){if(q[a])if(b instanceof Array)for(var c=0,d=b.length;c<d;c++)e.off(a,b[c]);else if("function"===typeof b){c=0;for(d=q[a].length;c<d;c++)q[a][c]===b&&q[a].splice(c,1)}else q[a].length=0};e.destroy=function(){ga.add(s).add(sa).add(y).add(D).add(X).add(T).add(U).add(V).add(W).unbind("."+j);T.add(U).add(V).add(W).removeClass(b.disabledClass);u&&u.eq(h.activeItem).removeClass(b.activeClass);X.empty();B||(C.unbind("."+j),s.add(y).css(K||(b.horizontal?"left":"top"),
K?"none":0),g.removeData(f,j))};e.init=function(){if(!qa){e.on(ea);B||(C.css("overflow","hidden"),"static"===C.css("position")&&C.css("position","relative"),s.add(y).css(g.extend({position:"absolute"},b.horizontal?{left:0}:{top:0})));"static"===D.css("position")&&D.css("position","relative");xa();G?e.activate(b.startAt):F(b.startAt);if(b.scrollBy)sa.on("DOMMouseScroll."+j+" mousewheel."+j,function(a){if(d.start!==d.end){v(a,1);a=a.originalEvent;var c=0;a.wheelDelta&&(c=0>a.wheelDelta/120);a.detail&&
(c=0>-a.detail/3);G?(a=la((Q?H?h.activeItem:h.centerItem:h.firstItem)+(c?b.scrollBy:-b.scrollBy)),e[Q?H?"activate":"toCenter":"toStart"](a)):e.slideBy(c?b.scrollBy:-b.scrollBy)}});if(b.clickBar&&D[0])D.on("click."+j,function(a){1>=a.which&&(v(a),F(da((b.horizontal?a.clientX-D.offset().left:a.clientY-D.offset().top)-O/2)))});b.keyboardNavBy&&ga.bind("keydown."+j,function(a){switch(a.which){case b.horizontal?37:38:v(a);e["pages"===b.keyboardNavBy?"prevPage":"prev"]();break;case b.horizontal?39:40:v(a),
e["pages"===b.keyboardNavBy?"nextPage":"next"]()}});if(b.prev)T.on("click."+j,function(a){v(a);e.prev()});if(b.next)U.on("click."+j,function(a){v(a);e.next()});if(b.prevPage)V.on("click."+j,function(a){v(a);e.prevPage()});if(b.nextPage)W.on("click."+j,function(a){v(a);e.nextPage()});s.on("click."+j,"*",function(a){1>=a.which&&(this.parentNode===a.delegateTarget&&!ha)&&e.activate(this);ha=0});if(X[0])X.on("click."+j,"*",function(){e.activatePage(aa.index(this))});if(b.dragging)wa.on(ta,{source:"slidee"},
ma);if(b.dragHandle&&y)y.on(ta,{source:"handle"},ma);if(b.cycleBy&&!B){if(b.pauseOnHover)C.on("mouseenter."+j+" mouseleave."+j,function(a){if(!$)e["mouseenter"===a.type?"pause":"cycle"](1)});e[b.startPaused?"pause":"cycle"]()}qa=1;return e}}}function v(f,b){f=f||E.event;f.preventDefault?f.preventDefault():f.returnValue=!1;b&&(f.stopPropagation?f.stopPropagation():f.cancelBubble=!0)}function R(f){return!isNaN(parseFloat(f))&&isFinite(f)}function I(f,b,g){return f<b?b:f>g?g:f}for(var ba="sly",j=ba,
k=E.cancelAnimationFrame||E.cancelRequestAnimationFrame,fa=E.requestAnimationFrame,K,M=window,w=["moz","webkit","o"],da=0,p=0,Y=w.length;p<Y&&!k;++p)fa=(k=M[w[p]+"CancelAnimationFrame"]||M[w[p]+"CancelRequestAnimationFrame"])&&M[w[p]+"RequestAnimationFrame"];k||(fa=function(f){var b=+new Date,g=Math.max(0,16-(b-da));da=b+g;return M.setTimeout(function(){f(b+g)},g)},k=function(f){clearTimeout(f)});k=["transform","webkitTransform","msTransform"];w=document.createElement("div");p=0;for(Y=k.length;p<
Y&&!K;p++)w.style[k[p]]!==P&&(K=k[p]);E.Sly=Z;g.fn[ba]=function(f,b){var k,p;if(!g.isPlainObject(f)){if("string"===typeof f||!1===f)k=!1===f?"destroy":f,p=arguments,Array.prototype.shift.call(p);f={}}return this.each(function(v,w){var x=g.data(w,j);!x&&!k?g.data(w,j,(new Z(w,f,b)).init()):x&&k&&x[k]&&x[k].apply(x,p)})};g.fn[ba].defaults={horizontal:0,itemNav:null,scrollBar:null,dragHandle:0,dynamicHandle:0,minHandleSize:50,clickBar:0,syncFactor:0.5,pagesBar:null,pageBuilder:function(f){return"<li>"+
(f+1)+"</li>"},prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5E3,pauseOnHover:0,startPaused:0,scrollBy:0,dragging:0,elasticBounds:0,speed:0,easing:"swing",scrollSource:null,dragSource:null,startAt:0,keyboardNavBy:0,domEvents:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}})(jQuery,window);
